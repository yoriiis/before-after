(()=>{"use strict";const t=new class{constructor(t){const e=t||{};this.options=Object.assign({element:null,cursor:!0,direction:"ltr",selectors:{item:".beforeafter-item",itemActive:".active",cursor:".beforeafter-cursor",imageWrapper:".beforeafter-wrapperImage"}},e),this.hasTouch="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,this.hasMSPointer=window.navigator.msPointerEnabled,null===this.options.element&&console.warn("BeforeAfter::Option element is missing"),this.itemActive=this.options.element.querySelector(this.options.selectors.itemActive),this.orientation="",this.attrToAnimate="",this.widthHeight="",this.heightElement=null,this.widthElement=null,this.timerGoTo=null,this.timerGoToAfter=null,this.timerCleaned=!1,this.cursor=null,this.onResize=this.onResize.bind(this),this.onMove=this.onMove.bind(this)}create(t){null===this.itemActive?console.warn("BeforeAfter::Item active is missing"):(this.detectOrientation(),this.itemActive.style.zIndex=1,this.options.cursor&&this.updateCursor(),this.checkImagesLoaded((()=>{this.heightElement=parseInt(this.options.element.offsetHeight),this.widthElement=parseInt(this.options.element.offsetWidth),this.addImageWrapper()})),this.addEvents(),"function"==typeof t&&t())}detectOrientation(){"ltr"===this.options.direction||"rtl"===this.options.direction?(this.orientation="horizontal",this.widthHeight="width",this.attrToAnimate="ltr"===this.options.direction?"left":"right"):"ttb"!==this.options.direction&&"btt"!==this.options.direction||(this.orientation="vertical",this.attrToAnimate="ttb"===this.options.direction?"top":"bottom",this.widthHeight="height")}buildCursor(){const t=`<div class='${this.options.selectors.cursor.substr(1)}'></div>`;this.options.element.insertAdjacentHTML("beforeend",t)}updateCursor(){null===this.cursor&&this.buildCursor(),this.cursor=this.options.element.parentNode.querySelector(this.options.selectors.cursor),this.cursor.style.position="absolute",this.cursor.style.zIndex=10,this.cursor.style.backgroundColor="#000",this.cursor.style.overflow="hidden",this.cursor.style.display="block","horizontal"===this.orientation?(this.cursor.style.width="2px",this.cursor.style.height="100%",this.cursor.style.top="0px"):"vertical"===this.orientation&&(this.cursor.style.width="100%",this.cursor.style.height="2px",this.cursor.style.left="0px"),"ltr"===this.options.direction&&(this.cursor.style.left="0px"),"rtl"===this.options.direction&&(this.cursor.style.left="auto",this.cursor.style.right="0px"),"ttb"===this.options.direction&&(this.cursor.style.top="0px"),"btt"===this.options.direction&&(this.cursor.style.top="auto",this.cursor.style.bottom="0px")}checkImagesLoaded(t){const e=[...this.options.element.querySelectorAll("img")];let i=0;e.forEach((s=>{const o=new Image;o.src=s.getAttribute("src"),o.onload=()=>{i++,i===e.length-1&&t()}}))}addImageWrapper(){[...this.options.element.querySelectorAll("img")].forEach((t=>{const e=document.createElement("div");e.classList.add(this.options.selectors.imageWrapper.substr(1)),t.parentNode.insertBefore(e,t),e.appendChild(t),"horizontal"===this.orientation?(e.style.position="absolute",e.style.top="0px",e.style.width=`${this.widthElement}px`,this.itemActive.style.top="0px","ltr"===this.options.direction&&(this.itemActive.style.left="auto",this.itemActive.style.right="0",e.style.right="0px"),"rtl"===this.options.direction&&(this.itemActive.style.left="0",this.itemActive.style.right="auto",e.style.left="0px")):"vertical"===this.orientation&&(e.style.position="absolute",e.style.left="0px",e.style.width="100%","ttb"===this.options.direction&&(this.itemActive.style.bottom="0",this.itemActive.style.top="auto",e.style.bottom="0px"),"btt"===this.options.direction&&(this.itemActive.style.bottom="auto",this.itemActive.style.top="0",e.style.top="0px"))}))}removeImageWrappers(){[...this.options.element.querySelectorAll(this.options.selectors.item)].forEach((t=>{t.appendChild(t.querySelector("img")),t.querySelector(this.options.selectors.imageWrapper).remove(),t.removeAttribute("style")}))}addEvents(){this.getUserEventsToTrack().forEach((t=>{this.options.element.addEventListener(t,this.onMove,!1)})),window.addEventListener("resize",this.onResize,!1)}onMove(t){this.move(t)}onResize(){this.resize()}removeEvents(){this.getUserEventsToTrack().forEach((t=>{this.options.element.removeEventListener(t,this.onMove)})),window.removeEventListener("resize",this.onResize)}getUserEventsToTrack(){return this.hasTouch?this.hasMSPointer?["pointerstart","MSPointerMove"]:["touchstart","touchmove"]:["mousemove"]}resize(){let t=0,e=null;if(this.heightElement=parseInt(this.options.element.offsetHeight),this.widthElement=parseInt(this.options.element.offsetWidth),"horizontal"===this.orientation){[...this.options.element.querySelectorAll(this.options.selectors.itemActive)].forEach((t=>{t.style.position="absolute",t.style.top="0px",t.style.width=this.widthElement})),"ltr"===this.options.direction?(t=this.itemActive.offsetLeft,e=`${t}px, 0`):"rtl"===this.options.direction&&(t=-1*(this.widthElement-this.itemActive.offsetWidth),e=`${t}px, 0`)}else"vertical"===this.orientation&&("ttb"===this.options.direction?(t=this.itemActive.offsetTop,e=`0, ${t}px`):"btt"===this.options.direction&&(t=-1*(this.heightElement-this.itemActive.offsetHeight),e=`0 , ${t}px`));this.options.cursor&&(this.cursor.style.transform=`translate(${e}) translateZ(0)`)}move(t){t.preventDefault(),null===this.timerGoTo||this.timerCleaned||(clearTimeout(this.timerGoTo),clearTimeout(this.timerGoToAfter),this.options.cursor&&this.updateCursor(),this.timerCleaned=!0);let e=0,i=0,s=0,o=0,r=0;o=this.hasTouch?t.touches[0].pageX:(this.hasMSPointer,t.pageX),r=this.hasTouch?t.touches[0].pageY:(this.hasMSPointer,t.pageY);const h=this.options.element.getBoundingClientRect();"ltr"===this.options.direction||"rtl"===this.options.direction?"ltr"===this.options.direction?(i=parseInt(o-h.x),e=i+"px, 0px",s=this.widthElement-i):(i=parseInt(this.widthElement-(o-h.x)),e=-i+"px, 0px",s=this.widthElement-i):"ttb"!==this.options.direction&&"btt"!==this.options.direction||("ttb"===this.options.direction?(i=parseInt(r-h.y),e="0px, "+i+"px",s=this.heightElement-i):(i=parseInt(this.heightElement-(r-h.y)),e="0px, "+-i+"px",s=this.heightElement-i)),this.options.cursor&&(this.cursor.style.transform=`translate(${e}) translateZ(0)`),this.itemActive.style[this.widthHeight]=`${s}px`,this.position=i}goTo(t){this.timerGoTo=setTimeout((()=>{let e=0,i=0,s=0;"ltr"===this.options.direction||"rtl"===this.options.direction?(e=this.widthElement-this.widthElement*t/100,i=this.widthElement*t/100):"ttb"!==this.options.direction&&"btt"!==this.options.direction||(e=this.heightElement-this.heightElement*t/100,i=this.heightElement*t/100),this.itemActive.style[this.widthHeight]=`${e}px`,this.options.cursor&&(this.cursor.style[this.attrToAnimate]=i,"ltr"===this.options.direction||"rtl"===this.options.direction?(s=e+"px, 0",this.cursor.style[this.attrToAnimate]="auto"):"ttb"===this.options.direction?(s="0, "+e+"px",this.cursor.style[this.attrToAnimate]=0):"btt"===this.options.direction&&(this.cursor.style[this.attrToAnimate]="auto",s="0, "+e+"px"),this.cursor.style.transform=`translate(${s}) translateZ(0)`),this.position=e}),100)}reset(){this.cursor.style.transform="none","horizontal"===this.orientation?(this.itemActive.style.width="100%",this.cursor.style.left="0px"):(this.itemActive.style.height="100%",this.cursor.style.top="0px")}destroy(){this.reset(),this.cursor.remove(),this.removeEvents(),this.removeImageWrappers()}}({element:document.querySelector(".beforeafter")});t.create((()=>t.goTo(50)))})();